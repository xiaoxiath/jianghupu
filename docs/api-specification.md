# ğŸ“¡ ã€Šæ±Ÿæ¹–æ®‹å·ã€‹API æ¥å£åè®®

---

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†ã€Šæ±Ÿæ¹–æ®‹å·ã€‹å¤–éƒ¨æœåŠ¡ï¼ˆä¸»è¦æ˜¯ AI è¯´ä¹¦äººï¼‰çš„ API æ¥å£ã€‚

- **åŸºåœ°å€ (Base URL)**: `https://api.jianghu.game/v1`
- **è®¤è¯**: `Bearer Token`
- **æ•°æ®æ ¼å¼**: `application/json`

---

## 2. é€šç”¨å®šä¹‰

### 2.1. é”™è¯¯å“åº”æ ¼å¼

```json
{
  "error": {
    "code": "error_code",
    "message": "A human-readable error message."
  }
}
```

### 2.2. å¸¸è§é”™è¯¯ç 

| Code | HTTP Status | æè¿° |
|---|---|---|
| `invalid_request` | 400 | è¯·æ±‚å‚æ•°é”™è¯¯æˆ–æ ¼å¼ä¸æ­£ç¡®ã€‚ |
| `unauthorized` | 401 | è®¤è¯å¤±è´¥ã€‚ |
| `not_found` | 404 | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚ |
| `internal_server_error` | 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚ |
| `rate_limit_exceeded` | 429 | è¯·æ±‚é¢‘ç‡è¶…è¿‡é™åˆ¶ã€‚ |

---

## 3. ç«¯ç‚¹ (Endpoints)

### 3.1. AI å™äº‹ç”Ÿæˆ

#### `POST /narrate`

æ ¹æ®å½“å‰æ¸¸æˆä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆä¸‹ä¸€æ®µå™äº‹å’Œç©å®¶é€‰é¡¹ã€‚

**è¯·æ±‚ä½“ (Request Body):**

```json
{
  "context": {
    "world": {
      "time": "ç”²å­å¹´å†¬æœˆåˆä¸‰",
      "location": {
        "name": "ä¸å¸®æ€»èˆµ",
        "description": "è¿™é‡Œæ˜¯ä¸å¸®çš„æ€»èˆµï¼Œäººå£°é¼æ²¸ï¼Œç©ºæ°”ä¸­å¼¥æ¼«ç€é…’æ°”å’Œæ±—å‘³ã€‚"
      },
      "summary": "é­”æ•™æœ€è¿‘æ”»é™·äº†åå±±ã€‚"
    },
    "player": {
      "name": "æå¯»æ¬¢",
      "realm": "å…ˆå¤©",
      "hp": 85,
      "mp": 60,
      "mood": "å¹³é™",
      "last_action_result": "åœ¨é…’é¦†æ‰“å¬æ¶ˆæ¯ï¼Œå¾—çŸ¥é­”æ•™çš„åŠ¨å‘ã€‚"
    }
  },
  "narrator_style": "å®¿å‘½"
}
```

**æˆåŠŸå“åº” (Response - 200 OK):**

```json
{
  "narration": "ä½ è¸å…¥ä¸å¸®æ€»èˆµï¼Œå–§é—¹å£°æˆ›ç„¶è€Œæ­¢ã€‚æ•°åé“ç›®å…‰é½åˆ·åˆ·åœ°æŠ•å‘ä½ ï¼Œä»¿ä½›è¦å°†ä½ çœ‹ç©¿ã€‚ä¸€ä¸ªç‹¬è‡‚è€è€…ç¼“ç¼“å¼€å£ï¼šâ€˜é˜ä¸‹éæˆ‘å¸®ä¸­äººï¼Œæ‰€æ¥ä½•äº‹ï¼Ÿâ€™",
  "options": [
    "1. æŠ±æ‹³è¡Œç¤¼ï¼Œè¯´æ˜æ¥æ„ã€‚",
    "2. é»˜ä¸ä½œå£°ï¼Œå¾„ç›´æ‰¾ä¸ªç©ºä½åä¸‹ã€‚",
    "3. ç¯é¡¾å››å‘¨ï¼Œå¯»æ‰¾æ­¤åœ°çš„è´Ÿè´£äººã€‚"
  ],
  "usage": {
    "prompt_tokens": 256,
    "completion_tokens": 128,
    "total_tokens": 384
  }
}
```

**å¤±è´¥å“åº” (Response - 400 Bad Request):**

```json
{
  "error": {
    "code": "invalid_request",
    "message": "Field 'context.player.name' is required."
  }
}